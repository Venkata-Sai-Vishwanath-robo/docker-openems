import{$d as d,M as h,Wf as u,ba as i,c as a,dc as l,fa as c}from"./chunk-UEHZAF3Y.js";var I=(()=>{class s{constructor(t,e,r){this.service=t,this.route=e,this.modalCtrl=r,this.isInitialized=!1,this.config=null,this.component=null,this.stopOnDestroy=new a,this.edge=null,this.showTotal=!0,this.showPhases=!1}ngOnInit(){this.service.getCurrentEdge().then(t=>{this.service.getConfig().then(e=>{this.edge=t,this.config=e,this.component=e.getComponent(this.route.snapshot.params.componentId),this.period=this.service.historyPeriod.value}).then(()=>{this.isInitialized=!0,this.afterIsInitialized(),this.updateValues()})})}updateValues(){let t=this.getChannelAddresses();this.service.queryEnergy(this.period.from,this.period.to,t).then(e=>{let r=e.result,n={};for(let p of t){let o=p.toString();n[o]=r.data[o]}this.onCurrentData({allComponents:n})}).catch(()=>{})}ngOnChanges(){this.updateValues()}ngOnDestroy(){this.stopOnDestroy.next(),this.stopOnDestroy.complete()}onCurrentData(t){}getChannelIds(){return[]}getChannelAddresses(){return[]}setShowTotal(t){this.showTotal=t}setShowPhases(t){this.showPhases=t}afterIsInitialized(){}static{this.\u0275fac=function(e){return new(e||s)(i(u),i(l),i(d))}}static{this.\u0275dir=c({type:s,features:[h]})}}return s})();export{I as a};
