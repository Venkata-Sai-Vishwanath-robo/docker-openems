import{$c as k,Ca as E,Da as C,E as p,Ea as c,F as d,Fc as y,Gd as B,Oc as w,Qa as l,Ra as _,V as o,Wc as T,Wf as H,Yc as b,Zc as N,_c as R,ba as s,cd as S,da as I,dc as A,dd as L,dg as O,ee as F,fe as M,ge as z,jb as v,jc as g,jd as U,kb as x,ld as P,mg as W,oa as u,pd as V,qa as f,qd as j,td as D,va as m,vc as G,wa as r,xa as a,ya as h}from"./chunk-UEHZAF3Y.js";import"./chunk-TCWA4BEU.js";import"./chunk-HJTVDRW6.js";import"./chunk-YJIFWFWF.js";import"./chunk-QUJFQN2Y.js";import"./chunk-P3LHHAYW.js";import"./chunk-Y7WT5TFP.js";import"./chunk-JHMH7CMQ.js";import"./chunk-WVHTM5RI.js";import"./chunk-IN6HLDFE.js";import"./chunk-GIMG75PD.js";import"./chunk-IHO4TDRD.js";import"./chunk-4KCIDQZU.js";import"./chunk-7UI6JPU6.js";import"./chunk-J5AVGG2P.js";import"./chunk-VIYDSDQU.js";import"./chunk-F46NF3P5.js";import"./chunk-SAL3DLJT.js";import"./chunk-MTHZ7MWU.js";import"./chunk-WI5MSH4N.js";import"./chunk-EOGXKGKT.js";import"./chunk-CKP3SGE2.js";import"./chunk-RY6RMDSE.js";import"./chunk-OQDXQ3X5.js";function K(n,Y){if(n&1){let t=E();r(0,"ion-card-content")(1,"form",5)(2,"ion-item",6),h(3,"ion-input",7),v(4,"translate"),a()(),r(5,"ion-row",0)(6,"ion-col",8)(7,"ion-button",9),C("click",function(){p(t);let i=c(2);return d(i.updateAlias(i.formGroup.controls.alias.value))}),l(8," GENERAL.APPLY "),a()(),r(9,"ion-col",8)(10,"ion-button",9),C("click",function(){p(t);let i=c(2);return d(i.updateAlias(""))}),l(11," GENERAL.RESET "),a()()()()}if(n&2){let t=c(2);o(),m("formGroup",t.formGroup),o(2),m("label",x(4,2,"GENERAL.CURRENT_NAME"))}}function Q(n,Y){if(n&1&&(r(0,"ion-card")(1,"ion-item"),h(2,"ion-icon",2),r(3,"ion-label")(4,"ion-card-title",3),l(5),a(),r(6,"ion-card-subtitle",4),l(7),a()()(),u(8,K,12,4,"ion-card-content"),a()),n&2){let t=c();o(2),m("name",t.componentIcon),o(3),_(t.factory.name),o(2),_(t.factory.description),o(),f(t.formGroup!==null?8:-1)}}var at=(()=>{class n{constructor(t,e,i,q,J){this.service=t,this.route=e,this.websocket=i,this.translate=q,this.formBuilder=J,this.component=null,this.formGroup=null,this.factory=null,this.componentIcon=null}ngOnInit(){this.service.getCurrentEdge().then(t=>{this.edge=t}),this.service.getConfig().then(t=>{let e=this.route.snapshot.params.componentId;this.component=t.components[e],this.factory=t.factories[this.component.factoryId],this.componentIcon=t.getFactoryIcon(this.factory,this.translate),this.formGroup=this.formBuilder.group({alias:new G(this.component.alias)})})}updateAlias(t){let e=t;this.edge!=null&&(this.component.id==e?this.service.toast(this.translate.instant("GENERAL.INPUT_NOT_VALID"),"danger"):this.edge.updateComponentConfig(this.websocket,this.component.id,[{name:"alias",value:e}]).then(()=>{this.formGroup.markAsPristine(),this.service.toast(this.translate.instant("GENERAL.CHANGE_ACCEPTED"),"success")}).catch(i=>{this.formGroup.markAsPristine(),this.service.toast(this.translate.instant("GENERAL.CHANGE_FAILED")+`
`+i.error.message,"danger"),console.warn(i)}))}static{this.\u0275fac=function(e){return new(e||n)(s(H),s(A),s(O),s(F),s(y))}}static{this.\u0275cmp=I({type:n,selectors:[["aliasupdate"]],decls:5,vars:1,consts:[[1,"ion-justify-content-center"],["size","12","size-xl","3"],["size","large","slot","start","color","primary",3,"name"],["color","primary",1,"ion-text-wrap"],[1,"ion-text-wrap"],[3,"formGroup"],["lines","full",1,"noPadding"],["formControlName","alias","label-placement","stacked",3,"label"],["size","6",1,"ion-text-center"],["expand","full","translate","",3,"click"]],template:function(e,i){e&1&&(r(0,"ion-content")(1,"ion-grid")(2,"ion-row",0)(3,"ion-col",1),u(4,Q,9,4,"ion-card"),a()()()()),e&2&&(o(4),f(i.factory?4:-1))},dependencies:[W,T,b,N,R,k,S,L,U,P,V,j,D,B,w,M,g,z],encapsulation:2})}}return n})();export{at as AliasUpdateComponent};
